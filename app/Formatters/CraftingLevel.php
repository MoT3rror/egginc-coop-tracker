<?php
declare(strict_types=1);

namespace App\Formatters;

class CraftingLevel
{
    /**
Level  Mult             XP Total XP
1      1                 0         0
2      1.05            500         500
3      1.1           2,500
4      1.15          5,000
5      1.2          10,000
6      1.25         25,000
7      1.3          50,000
8      1.35        100,000
9      1.4         250,000
10     1.45        500,000
11     1.5       1,000,000
12     1.55      2,000,000
13     1.6       4,000,000
14     1.65      8,000,000
15     1.7      15,000,000
16     1.75     20,000,000
17     1.85     35,000,000
18     2        60,000,000
19     2.25    100,000,000
20     2.5     150,000,000
21     3       200,000,000
22     3.5     250,000,000
23     4       300,000,000
24     4.5     325,000,000
25     5       350,000,000
26     6       400,000,000
27     7       500,000,000
28     8       600,000,000
29     9       750,000,000
30     10    1,000,000,000
     */
    
    private $levels = [
        1 => 0,
        2 => 500,
        3 => 3000,
        4 => 8000,
        5 => 18000,
        6 => 43000,
        7 => 93000,
        8 => 193000,
        9 => 443000,
        10 => 943000,
        11 => 1943000,
        12 => 3943000,
        13 => 7943000,
        14 => 15943000,
        15 => 30943000,
        16 => 50943000,
        17 => 85943000,
        18 => 145943000,
        19 => 245943000,
        20 => 395943000,
        21 => 595943000,
        22 => 845943000,
        23 => 1145943000,
        24 => 1470943000,
        25 => 1820943000,
        26 => 2220943000,
        27 => 2720943000,
        28 => 3320943000,
        29 => 4070943000,
        30 => 5070943000,
    ];

    public function xpToLevel(int $playerXp): int
    {
        foreach (array_reverse($this->levels, true) as $level => $xp) {
            if ($xp < $playerXp) {
                return $level;
            }
        }

        return 1;
    }
}
